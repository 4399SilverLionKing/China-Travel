# China Travel - æ™ºèƒ½æ—…è¡Œè§„åˆ’å¹³å°

ä¸€ä¸ªåŸºäºAIçš„æ™ºèƒ½æ—…è¡Œè§„åˆ’å¹³å°ï¼Œä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„ä¸­å›½æ—…è¡Œä½“éªŒã€‚è¯¥é¡¹ç›®é‡‡ç”¨ç°ä»£åŒ–çš„å…¨æ ˆæ¶æ„ï¼Œé›†æˆäº†åœ°å›¾æœåŠ¡ã€å¤©æ°”æŸ¥è¯¢ã€æ™ºèƒ½å¯¹è¯ç­‰åŠŸèƒ½ï¼Œä¸ºç”¨æˆ·æ‰“é€ å®Œæ•´çš„æ—…è¡Œè§„åˆ’è§£å†³æ–¹æ¡ˆã€‚

## ğŸŒŸ é¡¹ç›®ç‰¹è‰²

- **ğŸ¤– AIæ™ºèƒ½è§„åˆ’**: åŸºäºæ™ºè°±AI(GLM-4-Plus)çš„æ™ºèƒ½è¡Œç¨‹è§„åˆ’
- **ğŸ—ºï¸ åœ°å›¾é›†æˆ**: é›†æˆé«˜å¾·åœ°å›¾APIï¼Œæä¾›ç²¾å‡†çš„åœ°ç†ä½ç½®æœåŠ¡
- **ğŸŒ¤ï¸ å¤©æ°”æŸ¥è¯¢**: å®æ—¶å¤©æ°”ä¿¡æ¯å’Œé¢„æŠ¥ï¼ŒåŠ©åŠ›æ—…è¡Œå†³ç­–
- **ğŸ“± å“åº”å¼è®¾è®¡**: ç§»åŠ¨ç«¯ä¼˜å…ˆçš„ç°ä»£åŒ–UIè®¾è®¡
- **ğŸ” ç”¨æˆ·è®¤è¯**: å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œã€ç™»å½•å’Œæƒé™ç®¡ç†ç³»ç»Ÿ
- **ğŸ“ è¡Œç¨‹ç®¡ç†**: å†å²è¡Œç¨‹è®°å½•å’Œç®¡ç†åŠŸèƒ½
- **ğŸ’¬ æ™ºèƒ½å¯¹è¯**: æ”¯æŒæµå¼å“åº”çš„AIåŠ©æ‰‹å¯¹è¯

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æŠ€æœ¯æ ˆæ¦‚è§ˆ

```
Frontend (Next.js)  â†â†’  Backend (Spring Boot)  â†â†’  Database (MySQL)
       â†“                        â†“                        â†“
   AI Agent (FastAPI)  â†â†’  Cache (Redis)        â†â†’  External APIs
```

### æ ¸å¿ƒæ¨¡å—

#### 1. å‰ç«¯åº”ç”¨ (Frontend)
- **æŠ€æœ¯æ ˆ**: Next.js 15, React 19, TypeScript, Tailwind CSS
- **ä¸»è¦åŠŸèƒ½**:
  - å“åº”å¼åœ°å›¾ç•Œé¢ (é«˜å¾·åœ°å›¾é›†æˆ)
  - æ™ºèƒ½æœç´¢å’Œä½ç½®æœåŠ¡
  - è¡Œç¨‹è§„åˆ’è¡¨å•å’Œç»“æœå±•ç¤º
  - ç”¨æˆ·è®¤è¯å’Œä¸ªäººä¸­å¿ƒ
  - å®æ—¶å¤©æ°”ä¿¡æ¯å±•ç¤º
  - å†å²è¡Œç¨‹ç®¡ç†

#### 2. åç«¯æœåŠ¡ (Backend)
- **æŠ€æœ¯æ ˆ**: Spring Boot 3.5, Java 17, MyBatis-Plus, Spring Security
- **ä¸»è¦åŠŸèƒ½**:
  - RESTful APIæœåŠ¡
  - JWTèº«ä»½è®¤è¯å’Œæˆæƒ
  - ç”¨æˆ·ç®¡ç†å’Œæƒé™æ§åˆ¶
  - è¡Œç¨‹å†å²è®°å½•ç®¡ç†
  - æ•°æ®åº“æ“ä½œå’Œäº‹åŠ¡ç®¡ç†
  - Redisç¼“å­˜é›†æˆ

#### 3. AIæ™ºèƒ½ä»£ç† (Agent)
- **æŠ€æœ¯æ ˆ**: FastAPI, LangChain, Python 3.x
- **ä¸»è¦åŠŸèƒ½**:
  - æ™ºèƒ½å¯¹è¯å¤„ç†
  - è¡Œç¨‹è§„åˆ’ç”Ÿæˆ
  - å¤©æ°”ä¿¡æ¯æŸ¥è¯¢å·¥å…·
  - æµå¼å“åº”æ”¯æŒ
  - å¤šå·¥å…·é›†æˆ (å¤©æ°”ã€åœ°å›¾ç­‰)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 18+
- Java 17+
- Python 3.8+
- MySQL 8.0+
- Redis 6.0+

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd China-Travel
```

#### 2. å‰ç«¯è®¾ç½®
```bash
cd frontend
npm install
# æˆ–ä½¿ç”¨ pnpm
pnpm install

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env.local
# ç¼–è¾‘ .env.local æ–‡ä»¶ï¼Œé…ç½®APIå¯†é’¥
```

#### 3. åç«¯è®¾ç½®
```bash
cd backend
# é…ç½®æ•°æ®åº“è¿æ¥
# ç¼–è¾‘ src/main/resources/application.yaml

# æ„å»ºé¡¹ç›®
mvn clean package
# è¿è¡Œ
java -jar target/travel-0.0.1-SNAPSHOT.jar
```

#### 4. AIä»£ç†è®¾ç½®
```bash
cd agent
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®APIå¯†é’¥

# è¿è¡ŒæœåŠ¡
python -m uvicorn app.main:app --host 0.0.0.0 --port 20001
```

### ç¯å¢ƒå˜é‡é…ç½®

#### å‰ç«¯ (.env.local)
```env
NEXT_PUBLIC_JAVA_API_BASE_URL=http://localhost:20000
NEXT_PUBLIC_PYTHON_API_BASE_URL=http://localhost:20001
NEXT_PUBLIC_AMAP_API_KEY=your_amap_api_key
```

#### AIä»£ç† (.env)
```env
OPENAI_API_KEY=your_zhipu_api_key
OPENAI_BASE_URL=https://open.bigmodel.cn/api/paas/v4/
AMAP_API_KEY=your_amap_api_key
REDIS_HOST=localhost
REDIS_PASSWORD=your_redis_password
```

#### åç«¯ (application.yaml)
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/travel
    username: your_db_username
    password: your_db_password
  data:
    redis:
      host: localhost
      password: your_redis_password
```

## ğŸ“± åŠŸèƒ½ç‰¹æ€§

### ä¸»è¦é¡µé¢

1. **é¦–é¡µåœ°å›¾** (`/`)
   - äº¤äº’å¼åœ°å›¾ç•Œé¢
   - ä½ç½®æœç´¢å’Œæ ‡è®°
   - å¿«é€ŸåŠŸèƒ½å…¥å£ (è¡Œç¨‹è§„åˆ’ã€ä½ç½®ä»‹ç»ã€å¤©æ°”æŸ¥è¯¢)

2. **è¡Œç¨‹è§„åˆ’** (`/itinerary/plan`)
   - AIé©±åŠ¨çš„ä¸ªæ€§åŒ–è¡Œç¨‹ç”Ÿæˆ
   - æ”¯æŒå¤šç§å‡ºè¡Œæ–¹å¼å’Œåå¥½è®¾ç½®
   - Markdownæ ¼å¼çš„è¯¦ç»†è¡Œç¨‹å±•ç¤º

3. **å†å²è®°å½•** (`/itinerary`)
   - è¡Œç¨‹å†å²ç®¡ç†
   - æ”¶è—å’Œåˆ†äº«åŠŸèƒ½
   - å¿«é€Ÿé‡æ–°è§„åˆ’

4. **ä¸ªäººä¸­å¿ƒ** (`/profile`)
   - ç”¨æˆ·ä¿¡æ¯ç®¡ç†
   - ç™»å½•çŠ¶æ€ç®¡ç†
   - è´¦æˆ·è®¾ç½®

### æ ¸å¿ƒåŠŸèƒ½

#### ğŸ¤– AIæ™ºèƒ½è§„åˆ’
- åŸºäºç”¨æˆ·è¾“å…¥çš„å‡ºå‘åœ°ã€ç›®çš„åœ°ã€æ—¶é—´ç­‰ä¿¡æ¯
- ç»“åˆå¤©æ°”æ•°æ®æä¾›åˆç†å»ºè®®
- æ”¯æŒå†å²æ–‡åŒ–ã€è‡ªç„¶é£å…‰ã€ç¾é£Ÿã€è´­ç‰©ç­‰å¤šç§åå¥½
- ç”Ÿæˆè¯¦ç»†çš„åˆ†å¤©è¡Œç¨‹å®‰æ’

#### ğŸ—ºï¸ åœ°å›¾æœåŠ¡
- é«˜å¾·åœ°å›¾é›†æˆï¼Œæ”¯æŒæœç´¢ã€å®šä½ã€æ ‡è®°
- å®æ—¶ä½ç½®è·å–å’Œåœ°å€è§£æ
- äº¤äº’å¼åœ°å›¾æ“ä½œä½“éªŒ

#### ğŸŒ¤ï¸ å¤©æ°”æœåŠ¡
- å®æ—¶å¤©æ°”ä¿¡æ¯æŸ¥è¯¢
- å¤šå¤©å¤©æ°”é¢„æŠ¥
- åŸºäºä½ç½®çš„è‡ªåŠ¨å¤©æ°”è·å–

#### ğŸ’¬ æ™ºèƒ½å¯¹è¯
- æ”¯æŒè‡ªç„¶è¯­è¨€äº¤äº’
- æµå¼å“åº”æå‡ç”¨æˆ·ä½“éªŒ
- å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ä¿æŒ

## ğŸ”§ APIæ¥å£

### åç«¯API (ç«¯å£: 20000)

#### ç”¨æˆ·è®¤è¯
- `POST /authenticate/login` - ç”¨æˆ·ç™»å½•
- `POST /authenticate/register` - ç”¨æˆ·æ³¨å†Œ

#### è¡Œç¨‹ç®¡ç†
- `GET /itinerary/history` - è·å–å†å²è®°å½•
- `POST /itinerary/history` - ä¿å­˜è¡Œç¨‹è®°å½•
- `DELETE /itinerary/history/{id}` - åˆ é™¤è¡Œç¨‹è®°å½•

### AIä»£ç†API (ç«¯å£: 20001)

#### æ™ºèƒ½å¯¹è¯
- `POST /chat` - å‘é€èŠå¤©æ¶ˆæ¯
- `POST /chat/stream` - æµå¼èŠå¤©å“åº”

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
China-Travel/
â”œâ”€â”€ frontend/                 # Next.jså‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ app/                  # App Routeré¡µé¢
â”‚   â”œâ”€â”€ components/           # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ lib/                  # å·¥å…·åº“å’Œé…ç½®
â”‚   â””â”€â”€ public/               # é™æ€èµ„æº
â”œâ”€â”€ backend/                  # Spring Bootåç«¯
â”‚   â”œâ”€â”€ src/main/java/        # Javaæºç 
â”‚   â”œâ”€â”€ src/main/resources/   # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ pom.xml               # Mavené…ç½®
â”œâ”€â”€ agent/                    # Python AIä»£ç†
â”‚   â”œâ”€â”€ app/                  # FastAPIåº”ç”¨
â”‚   â”œâ”€â”€ requirements.txt      # Pythonä¾èµ–
â”‚   â””â”€â”€ venv/                 # è™šæ‹Ÿç¯å¢ƒ
â””â”€â”€ document/                 # é¡¹ç›®æ–‡æ¡£
```

### å¼€å‘è§„èŒƒ

1. **ä»£ç é£æ ¼**
   - å‰ç«¯: ESLint + Prettier
   - åç«¯: Google Java Style Guide
   - Python: PEP 8

2. **æäº¤è§„èŒƒ**
   - ä½¿ç”¨è¯­ä¹‰åŒ–æäº¤ä¿¡æ¯
   - æ ¼å¼: `type(scope): description`

3. **åˆ†æ”¯ç®¡ç†**
   - `main`: ä¸»åˆ†æ”¯
   - `develop`: å¼€å‘åˆ†æ”¯
   - `feature/*`: åŠŸèƒ½åˆ†æ”¯

## ğŸš¢ éƒ¨ç½²æŒ‡å—

### Dockeréƒ¨ç½²

#### åç«¯æœåŠ¡
```bash
cd backend
docker build -t china-travel-backend .
docker run -p 20000:20000 china-travel-backend
```

#### å‰ç«¯åº”ç”¨
```bash
cd frontend
docker build -t china-travel-frontend .
docker run -p 3000:3000 china-travel-frontend
```

### ç”Ÿäº§ç¯å¢ƒé…ç½®

1. **æ•°æ®åº“ä¼˜åŒ–**
   - é…ç½®è¿æ¥æ± 
   - è®¾ç½®ç´¢å¼•ä¼˜åŒ–
   - å®šæœŸå¤‡ä»½ç­–ç•¥

2. **ç¼“å­˜ç­–ç•¥**
   - Redisé›†ç¾¤é…ç½®
   - ç¼“å­˜è¿‡æœŸç­–ç•¥
   - ç¼“å­˜é¢„çƒ­

3. **å®‰å…¨é…ç½®**
   - HTTPSè¯ä¹¦é…ç½®
   - APIé™æµè®¾ç½®
   - æ•æ„Ÿä¿¡æ¯åŠ å¯†

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [é«˜å¾·åœ°å›¾API](https://lbs.amap.com/) - åœ°å›¾å’Œä½ç½®æœåŠ¡
- [æ™ºè°±AI](https://open.bigmodel.cn/) - AIå¯¹è¯å’Œæ–‡æœ¬ç”Ÿæˆ
- [Next.js](https://nextjs.org/) - Reactæ¡†æ¶
- [Spring Boot](https://spring.io/projects/spring-boot) - Javaåç«¯æ¡†æ¶
- [LangChain](https://langchain.com/) - AIåº”ç”¨å¼€å‘æ¡†æ¶

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- é¡¹ç›®Issues: [GitHub Issues](https://github.com/your-repo/issues)
- é‚®ç®±: your-email@example.com

---

**China Travel** - è®©AIä¸ºæ‚¨çš„ä¸­å›½ä¹‹æ—…ä¿é©¾æŠ¤èˆª ğŸ‡¨ğŸ‡³âœˆï¸
